{% extends "books/base_books.html" %}

{% load static %}

{% block title %}
Stats
{% endblock %}

{% block body %}
<div class="stats-style" style="margin-top: 35px; margin-left: 10px; margin-right: 10px;">
    <div class="stats-book-line" style="margin-top: 35px; margin-left: 10px; margin-right: 10px;">
        {% for book, pages_read, percent_read in currently_reading_books %}
        <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px;">
            <div class="progress-bar bg-primary pl-3 text-white" role="progressbar"
                 style="width: {{percent_read}}%;">{{book.title}} ({{pages_read}} / {{book.pages}})</div>
        </div>
        <a class="modify-condensed" href="{% url 'books:book_detail' book.id %}">Details</a>
        <a class="modify-condensed" href="{% url 'books:update_book_progress' book.id %}">Update</a>
        {% endfor %}
    </div>

    <h2>Books</h2>

    <div class="card-grid">
        <div></div>
        <div class="card card-blue">
            <div class="card-title">Read</div>
            <div class="card-value">{{state.books_read|floatformat:1}}</div>
        </div>

        {% if state.expected_books_by_end_of_year < state.goal %}
        <div class="card card-red">
        {% else %}
        <div class="card card-green">
            {% endif %}
            <div class="card-title">Should have</div>
            <div class="card-value">{{state.expected_books_so_far|floatformat:1}}</div>
        </div>

        {% if state.expected_books_by_end_of_year < state.goal %}
        <div class="card card-red">
        {% else %}
        <div class="card card-green">
        {% endif %}
            <div class="card-title">Expected</div>
            <div class="card-value">{{state.expected_books_by_end_of_year|floatformat:1}}</div>
        </div>
    </div>

    <div class="progress bg-secondary mt-5" style="width: 100%; height: 50px; font-size: 30px;">
        {% if pages_per_day.0 > pages_per_day.1 %}
        <div class="progress-bar bg-success" role="progressbar" style="width: {{pages_per_day.2}}%;"
             aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">{{pages_per_day.0|floatformat:1}} ppd</div>
        <div class="progress-bar bg-secondary" role="progressbar" style="width: {{pages_per_day.3}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">{{pages_per_day.1|floatformat:1}} ppd</div>
        {% else %}
        <div class="progress-bar bg-secondary" role="progressbar" style="width: {{pages_per_day.2}}%;"
             aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">{{pages_per_day.0|floatformat:1}} ppd</div>
        <div class="progress-bar bg-danger" role="progressbar" style="width: {{pages_per_day.3}}%" aria-valuenow="30"
             aria-valuemin="0" aria-valuemax="100">{{pages_per_day.1|floatformat:1}} ppd</div>
        {% endif %}
    </div>

    <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px">
        <div class="progress-bar" role="progressbar" style="width: {{perc_total_pages}}%;" aria-valuenow="100"
             aria-valuemin="0" aria-valuemax="100">{{state.pages_read}} pages read</div>
    </div>

    <div class="progress bg-secondary" style="width: 100%; height: 50px; font-size: 30px;">
        <div class="progress-bar" role="progressbar" style="width: {{perc_ppb}}%;" aria-valuenow="100"
             aria-valuemin="0" aria-valuemax="100">{{state.pages_per_book|floatformat:1}} pages per book</div>
    </div>
</div>
{% endblock %}
